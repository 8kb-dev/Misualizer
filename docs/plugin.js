parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"kUj2":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"dMjH":[function(require,module,exports) {
function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}module.exports=r;
},{}],"iRp5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.diffElement=r,exports.DiffValue=exports.Element=void 0;var t=i(require("@babel/runtime/helpers/classCallCheck")),e=i(require("@babel/runtime/helpers/createClass"));function i(t){return t&&t.__esModule?t:{default:t}}var s=function(t){return void 0===t?t:JSON.parse(JSON.stringify(t))},n=function(){function i(e,s){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];(0,t.default)(this,i),this.id=e,this.t=s,this.annots=n,this.instr=u,this.value=r,this.subs=l}return(0,e.default)(i,[{key:"clone",value:function(){return new i(this.id,s(this.t),s(this.annots),this.instr,s(this.value),this.subs)}}]),i}();exports.Element=n;var u=function(){function i(e){(0,t.default)(this,i),this.direction=e}return(0,e.default)(i,[{key:"addDirection",value:function(t){this.direction!==t&&(this.direction="both")}},{key:"hasValue",value:function(){return this.left||this.right}},{key:"read",value:function(t){var e=[];return this.left&&e.push(t(this.left)),this.right&&e.length&&e.push("/"),this.right&&e.push(t(this.right)),e.join(" ")}}]),i}();function r(t,e,i){var s=function t(e,i,s){i.value instanceof u?i.value.addDirection(s):i.value=new u(s),"Left"===e.instr?t(e.subs[0],i.subs[0],s):"Right"===e.instr?t(e.subs[0],i.subs[1],s):"pair"===e.t[0]?(t(e.subs[0],i.subs[0],s),t(e.subs[1],i.subs[1],s)):"left"===s?i.value.left=e:i.value.right=e};return s(e,t,"left"),s(i,t,"right"),t}exports.DiffValue=u;
},{"@babel/runtime/helpers/classCallCheck":"kUj2","@babel/runtime/helpers/createClass":"dMjH"}],"dEOc":[function(require,module,exports) {
function r(r){if(Array.isArray(r))return r}module.exports=r;
},{}],"RonT":[function(require,module,exports) {
function t(t,r){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],o=!0,n=!1,l=void 0;try{for(var i,a=t[Symbol.iterator]();!(o=(i=a.next()).done)&&(e.push(i.value),!r||e.length!==r);o=!0);}catch(u){n=!0,l=u}finally{try{o||null==a.return||a.return()}finally{if(n)throw l}}return e}}module.exports=t;
},{}],"sa4T":[function(require,module,exports) {
function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}module.exports=t;
},{}],"xkYc":[function(require,module,exports) {
var r=require("./arrayWithHoles"),e=require("./iterableToArrayLimit"),i=require("./nonIterableRest");function t(t,a){return r(t)||e(t,a)||i()}module.exports=t;
},{"./arrayWithHoles":"dEOc","./iterableToArrayLimit":"RonT","./nonIterableRest":"sa4T"}],"ez1c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readType=n,exports.fallbackType=t,exports.settingInstrID=i,exports.createElementByType=a,exports.mockValueFromType=m;var r=require("./elem"),e={int:new Set(["int","nat","mutez","timestamp"]),string:new Set(["string","key_hash","address","chain_id"]),bytes:new Set(["bytes","key","signature"])};function n(r){return r.args instanceof Array?[r.prim].concat(r.args.map(function(r){return n(r)})):[r.prim]}function t(r){if("string"==typeof r)return{prim:r};var e="string"==typeof r[0]?r[0]:"";return r.length>1?{prim:e,args:r.slice(1).map(function(r){return t(r)})}:{prim:e}}function i(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G",n=1;return function r(t){t.annots.length||t.annots.push(e+n++),t.subs.forEach(function(e){return r(e)})}(r),r}function a(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{val:1},m=n(e),p=t.annots?t.annots:e.annots||[];if(!e.args)return"unit"===e.prim||"bool"===e.prim?new r.Element(i.val++,m,p,"",t.prim,[]):new r.Element(i.val++,m,p,"",Object.values(t)[0],[]);var s=e.args[0],l=e.args[1];if("pair"===e.prim)return new r.Element(i.val++,m,p,"",null,[a(s,t.args[0],i),a(l,t.args[1],i)]);if("or"===e.prim)return new r.Element(i.val++,m,p,t.prim,null,"Left"===t.prim?[a(s,t.args[0],i)]:"Right"===t.prim?[a(l,t.args[0],i)]:[a(s,t.args[0],i),a(l,t.args[1],i)]);if("list"===e.prim||"set"===e.prim)return new r.Element(i.val++,m,p,"",null,t.map(function(r){return a(s,r,i)}));if("map"===e.prim||"big_map"===e.prim)return new r.Element(i.val++,m,p,"",null,t.map(function(e){return new r.Element(i.val++,["elt"],e.annots||p,"",null,[a(s,e.args[0],i),a(l,e.args[1],i)])}));if("option"===e.prim)return new r.Element(i.val++,m,p,t.prim,null,"Some"===t.prim?[a(s,t.args[0],i)]:[]);if("contract"===e.prim)return new r.Element(i.val++,m,p,"",t.string,[]);if("lambda"===e.prim){var u=t instanceof Array?t:t.args[2];return new r.Element(i.val++,m,p,"",u,[])}throw"createElementByType / invalid t: ".concat(e.prim," v: ").concat(t.prim)}function m(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{val:1};if(r.args){var t=r.args[0],i=r.args[1];if("pair"===r.prim)return{prim:"Pair",args:[m(t,n),m(i,n)]};if("or"===r.prim)return{prim:"Left|Right",args:[m(t,n),m(i,n)]};if("list"===r.prim||"set"===r.prim)return[m(t,n)];if("map"===r.prim||"big_map"===r.prim)return[{prim:"Elt",args:[m(t,n),m(i,n)]}];if("option"===r.prim)return{prim:"Some|None",args:[m(r.args[0],n)]};if("contract"===r.prim)return{string:""};if("lambda"===r.prim)return[{prim:"RENAME",annots:[""]}]}else{if(e.int.has(r.prim))return{int:""};if(e.string.has(r.prim))return{string:""};if(e.bytes.has(r.prim))return{bytes:""};if("unit"===r.prim)return{prim:"Unit"};if("bool"===r.prim)return{prim:"True|False"}}throw"mockValueFromType / invalid Micheline type: ".concat(r.prim)}
},{"./elem":"iRp5"}],"QtXH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.instrs=void 0;var n=u(require("@babel/runtime/helpers/slicedToArray")),t=require("./contract"),e=require("./elem"),r=require("./micheline");function u(n){return n&&n.__esModule?n:{default:n}}var i=function(n){return void 0===n?n:JSON.parse(JSON.stringify(n))},a=function(n){return i(n instanceof Array?n:[n])},o={STOP:function(n,t,e){return t},CAR:function(n,t,e){return t.replace(function(t){return t.instr?n.newElement(a(t.t[1]),e.annots,"PAIR.0",null,[t]):t.subs[0]}),t},CDR:function(n,t,e){return t.replace(function(t){return t.instr?n.newElement(a(t.t[2]),e.annots,"PAIR.1",null,[t]):t.subs[1]}),t},DROP:function(n,t,e){var r=e.args&&e.args[0].int?parseInt(e.args[0].int):1;return t.drop(r),t},PUSH:function(n,t,e){return t.insert((0,r.createElementByType)(e.args[0],e.args[1],n.elem_id)),t},INT:function(n,t,e){return t.replace(function(t){return n.newElement(["int"],e.annots,e.prim,null,[t])}),t},NEG:function(n,t,e){return t.replace(function(t){return n.newElement(["int"],e.annots,e.prim,null,[t])}),t},ABS:function(n,t,e){return t.replace(function(t){return n.newElement(["nat"],e.annots,e.prim,null,[t])}),t},LSL:function(n,t,e){return t.insert(n.newElement(["nat"],e.annots,e.prim,null,t.drop(2))),t},LSR:function(n,t,e){return t.insert(n.newElement(["nat"],e.annots,e.prim,null,t.drop(2))),t},EDIV:function(t,e,r){var u,i,a=e.drop(2),o=(0,n.default)(a,2),l=o[0],s=o[1];return"mutez"===l.t[0]?(u="nat"===s.t[0]?"mutez":"nat",i="mutez"):(u="nat"===l.t[0]&&"nat"===s.t[0]?"nat":"int",i="nat"),e.insert(t.newElement(["option",["pair",u,i]],r.annots,r.prim,null,[l,s])),e},MUL:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),a=i[0],o=i[1],l=new Set([a,o].map(function(n){return n.t[0]})),s=l.has("mutez")?"mutez":l.has("int")?"int":"nat";return e.insert(t.newElement([s],r.annots,r.prim,null,[a,o])),e},ADD:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),a=i[0],o=i[1],l=new Set([a,o].map(function(n){return n.t[0]})),s=l.has("timestamp")?"timestamp":l.has("mutez")?"mutez":l.has("int")?"int":"nat";return e.insert(t.newElement([s],r.annots,r.prim,null,[a,o])),e},SUB:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),a=i[0],o=i[1],l=new Set([a,o].map(function(n){return n.t[0]})).has("mutez")?"mutez":"timestamp"===a.t[0]?"timestamp"===o.t[0]?"int":"timestamp":"int";return e.insert(t.newElement([l],r.annots,r.prim,null,[a,o])),e},XOR:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),o=i[0],l=i[1];return e.insert(t.newElement(a(o.t[0]),r.annots,r.prim,null,[o,l])),e},AND:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),o=i[0],l=i[1];return e.insert(t.newElement(a(l.t[0]),r.annots,r.prim,null,[o,l])),e},OR:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),o=i[0],l=i[1];return e.insert(t.newElement(a(o.t[0]),r.annots,r.prim,null,[o,l])),e},CONS:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),o=i[0],l=i[1];return e.insert(t.newElement(a(l.t),r.annots,r.prim,null,[o,l])),e},NIL:function(n,t,e){return t.insert(n.newElement(["list",(0,r.readType)(e.args[0])],e.annots,e.prim,null,[])),t},PAIR:function(t,e,r){var u=e.drop(2),a=(0,n.default)(u,2),o=a[0],l=a[1];return e.insert(t.newElement(i(["pair",o.t,l.t]),r.annots,"",null,[o,l])),e},IF_CONS:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];e.pushCondition(i,"COND_ITEM",t);var o=e.clone(),l=e.clone();o.insert(i),o.insert(t.newElement(a(i.t[1]),[],"ITEM.0",null,[i])),o=t.walkCode(r.args[0],o),l=t.walkCode(r.args[1],l);var s=1;return o.is_failed()&&(s+=2),l.is_failed()&&(s*=2),{1:function(){return e.stack=o.combine(l,t,r.prim,i,r.annots),e},2:function(){return t.fail_stacks.push(l),o},3:function(){return t.fail_stacks.push(o),l},6:function(){return t.fail_stacks.push(o),t.fail_stacks.push(l),o}}[s]()},IF_LEFT:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];e.pushCondition(i,"COND_LEFT",t);var o=e.clone(),l=e.clone();o.insert(t.newElement(a(i.t[1]),r.annots,"OR.LEFT",null,[i])),l.insert(t.newElement(a(i.t[2]),r.annots,"OR.RIGHT",null,[i])),o=t.walkCode(r.args[0],o),l=t.walkCode(r.args[1],l);var s=1;return o.is_failed()&&(s+=2),l.is_failed()&&(s*=2),{1:function(){return e.stack=o.combine(l,t,r.prim,i,r.annots),e},2:function(){return t.fail_stacks.push(l),o},3:function(){return t.fail_stacks.push(o),l},6:function(){return t.fail_stacks.push(o),t.fail_stacks.push(l),o}}[s]()},IF_NONE:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];e.pushCondition(i,"COND_NONE",t);var o=e.clone(),l=e.clone();l.insert(t.newElement(a(i.t[1]),r.annots,"OPTION.0",null,[i])),o=t.walkCode(r.args[0],o),l=t.walkCode(r.args[1],l);var s=1;return o.is_failed()&&(s+=2),l.is_failed()&&(s*=2),{1:function(){return e.stack=o.combine(l,t,r.prim,i,r.annots),e},2:function(){return t.fail_stacks.push(l),o},3:function(){return t.fail_stacks.push(o),l},6:function(){return t.fail_stacks.push(o),t.fail_stacks.push(l),o}}[s]()},IF:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];e.pushCondition(i,"COND_TRUE",t);var a=e.clone(),o=e.clone();a=t.walkCode(r.args[0],a),o=t.walkCode(r.args[1],o);var l=1;return a.is_failed()&&(l+=2),o.is_failed()&&(l*=2),{1:function(){return e.stack=a.combine(o,t,r.prim,i,r.annots),e},2:function(){return t.fail_stacks.push(o),a},3:function(){return t.fail_stacks.push(a),o},6:function(){return t.fail_stacks.push(a),t.fail_stacks.push(o),a}}[l]()},LOOP_LEFT:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];e.pushCondition(i,"COND_LEFT",t);var o=e.clone(),l=e.clone();o.insert(t.newElement(a(i.t[2]),r.annots,"OR.LEFT.RIGHT",null,[i])),l.insert(t.newElement(a(i.t[2]),r.annots,"OR.RIGHT",null,[i]));var s=1;return(o=t.walkCode(r.args[0],o)).is_failed()&&(s+=2),l.is_failed()&&(s*=2),{1:function(){return e.stack=o.combine(l,t,r.prim,i,r.annots),e},2:function(){return t.fail_stacks.push(l),o},3:function(){return t.fail_stacks.push(o),l},6:function(){return t.fail_stacks.push(o),t.fail_stacks.push(l),o}}[s]()},LOOP:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];e.pushCondition(i,"COND_TRUE",t);var a=e.clone(),o=e.clone();(a=t.walkCode(r.args[0],a)).drop(1);var l=1;return a.is_failed()&&(l+=2),o.is_failed()&&(l*=2),{1:function(){return e.stack=a.combine(o,t,r.prim,i,r.annots),e},2:function(){return t.fail_stacks.push(o),a},3:function(){return t.fail_stacks.push(a),o},6:function(){return t.fail_stacks.push(a),t.fail_stacks.push(o),a}}[l]()},SOME:function(n,t,e){return t.replace(function(t){return n.newElement(["option",i(t.t)],e.annots,e.prim,null,[t])}),t},NONE:function(n,t,e){return t.insert(n.newElement(["option",(0,r.readType)(e.args[0])],e.annots,e.prim,null,[])),t},ITER:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];e.pushCondition(i,"COND_ITEM",t);var o=e.clone(),l=e.clone();o.insert(t.newElement(a(i.t[1]),r.annots,"ITEM.0",null,[i]));var s=1;return(o=t.walkCode(r.args[0],o)).is_failed()&&(s+=2),l.is_failed()&&(s*=2),{1:function(){return e.stack=o.combine(l,t,r.prim,i,r.annots),e},2:function(){return t.fail_stacks.push(l),o},3:function(){return t.fail_stacks.push(o),l},6:function(){return t.fail_stacks.push(o),t.fail_stacks.push(l),o}}[s]()},MAP:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];return e.insert(t.newElement(a(i.t),r.annots,r.prim,null,[i])),e},FAILWITH:function(n,t,e){var r=n.newElement(["fail"],e.annots,"",null,t.drop(1).concat(t.conditions));return t.empty(),t.insert(r),t},DUP:function(n,t,e){return t.insert(t.top().clone()),t},DIP:function(n,t,e){var r=e.args[0].int?parseInt(e.args.shift().int):1,u=t.dip_top;return t.dip_top+=r,(t=n.walkCode(e.args[0],t)).dip_top=u,t},DIG:function(n,t,e){var r=parseInt(e.args[0].int);return t.insert(t.dropAt(r)),t},DUG:function(t,e,r){var u=parseInt(r.args[0].int),i=e.drop(1),a=(0,n.default)(i,1)[0];return e.insertAt(u,a),e},NOW:function(n,t,e){return t.insert(n.newElement(["timestamp"],e.annots,"",n.init_args.now,[])),t},COMPARE:function(n,t,e){return t.insert(n.newElement(["int"],e.annots,e.prim,null,t.drop(2))),t},GT:function(n,t,e){return t.replace(function(t){return n.newElement(["bool"],e.annots,e.prim,null,[t])}),t},EQ:function(n,t,e){return t.replace(function(t){return n.newElement(["bool"],e.annots,e.prim,null,[t])}),t},GE:function(n,t,e){return t.replace(function(t){return n.newElement(["bool"],e.annots,e.prim,null,[t])}),t},LE:function(n,t,e){return t.replace(function(t){return n.newElement(["bool"],e.annots,e.prim,null,[t])}),t},LT:function(n,t,e){return t.replace(function(t){return n.newElement(["bool"],e.annots,e.prim,null,[t])}),t},NEQ:function(n,t,e){return t.replace(function(t){return n.newElement(["bool"],e.annots,e.prim,null,[t])}),t},AMOUNT:function(n,t,e){return t.insert(n.newElement(["mutez"],e.annots,"",n.init_args.amount,[])),t},BALANCE:function(n,t,e){return t.insert(n.newElement(["mutez"],e.annots,"",n.init_args.balance,[])),t},SELF:function(n,t,e){return t.insert(n.newElement(["contract",(0,r.readType)(n.contract.parameter)],e.annots,"",n.init_args.self,[])),t},SWAP:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),a=i[0],o=i[1];return e.insert(a),e.insert(o),e},CHAIN_ID:function(n,t,e){return t.insert(n.newElement(["chain_id"],e.annots,"",n.init_args.chain_id,[])),t},UNIT:function(n,t,e){return t.insert(n.newElement(["unit"],e.annots,"","Unit",[])),t},IMPLICIT_ACCOUNT:function(n,t,e){return t.insert(n.newElement(["contract","unit"],e.annots,e.prim,null,t.drop(1))),t},TRANSFER_TOKENS:function(n,t,e){return t.insert(n.newElement(["operation"],e.annots,e.prim,null,t.drop(3))),t},PACK:function(n,t,e){return t.replace(function(t){return n.newElement(["bytes"],e.annots,e.prim,null,[t])}),t},UNPACK:function(n,t,e){return t.replace(function(t){return n.newElement(["option",(0,r.readType)(e.args[0])],e.annots,e.prim,null,[t])}),t},CHECK_SIGNATURE:function(n,t,e){return t.insert(n.newElement(["bool"],e.annots,e.prim,null,t.drop(3))),t},APPLY:function(t,e,u){var i=e.drop(2),a=(0,n.default)(i,2),o=a[0],l=a[1];if(!(l.value instanceof Array))throw"APPLY / invalid lambda value: ".concat(l.value);return l.value.unshift({prim:"PAIR"}),l.value.unshift({prim:"PUSH",args:[(0,r.fallbackType)(o.t),o]}),e.insert(l),e},EXEC:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),o=i[0],l=i[1];return l.value&&l.value.length?(e.insert(o),e=t.walkCode(l.value,e)):e.insert(t.newElement(a(l.t[2]),r.annots,r.prim,null,[o,l])),e},LAMBDA:function(n,t,e){return t.insert(n.newElement(["lambda",(0,r.readType)(e.args[0]),(0,r.readType)(e.args[1])],e.annots,"",e.args[2],[])),t},CONCAT:function(t,e,r){var u=e.drop(1),i=(0,n.default)(u,1)[0];if("list"===i.t[0])e.insert(t.newElement(a(i.t[1]),r.annots,r.prim,null,[i]));else{var o=e.drop(1),l=(0,n.default)(o,1)[0];e.insert(t.newElement(a(i.t[0]),r.annots,r.prim,null,[i,l]))}return e},CONTRACT:function(t,e,u){var i=e.drop(1),a=(0,n.default)(i,1)[0];return e.insert(t.newElement(["option",["contract",(0,r.readType)(u.args[0])]],u.annots,"",null,[a])),e},STEPS_TO_QUOTA:function(n,t,e){return t.insert(n.newElement(["nat"],e.annots,"","STEPS_TO_QUOTA",[])),t},CREATE_ACCOUNT:function(n,t,e){var r=t.drop(4);return t.insert(n.newElement(["address"],e.annots,e.prim+"_ADDR",null,r)),t.insert(n.newElement(["operation"],e.annots,e.prim,null,r)),t},CREATE_CONTRACT:function(n,t,e){var r="key_hash"===t.top().t[0]?t.drop(5):t.drop(3),u=5===r.length?"LEGACY_CREATE_CONTRACT":"CREATE_CONTRACT";return t.insert(n.newElement(["address"],e.annots,u+"_ADDR",null,r)),t.insert(n.newElement(["operation"],e.annots,u,null,r)),t},MEM:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),a=i[0],o=i[1];return e.insert(t.newElement(["bool"],r.annots,r.prim,null,[a,o])),e},GET:function(t,e,r){var u=e.drop(2),i=(0,n.default)(u,2),a=i[0],o=i[1];return e.insert(t.newElement(["option",o.t[2]],r.annots,r.prim,null,[a,o])),e},UPDATE:function(t,e,r){var u=e.drop(3),i=(0,n.default)(u,3),o=i[0],l=i[1],s=i[2];return e.insert(t.newElement(a(s.t),r.annots,r.prim,null,[o,l,s])),e},LEFT:function(t,e,u){var i=e.drop(1),a=(0,n.default)(i,1)[0];return e.insert(t.newElement(["or",a.t,(0,r.readType)(u.args[0])],u.annots,u.prim,null,[a])),e},RIGHT:function(t,e,u){var i=e.drop(1),a=(0,n.default)(i,1)[0];return e.insert(t.newElement(["or",(0,r.readType)(u.args[0]),a.t],u.annots,u.prim,null,[a])),e},EMPTY_SET:function(n,t,e){return t.insert(n.newElement(["set",(0,r.readType)(e.args[0])],e.annots,"",null,[])),t},EMPTY_BIG_MAP:function(n,t,e){return t.insert(n.newElement(["big_map",(0,r.readType)(e.args[0]),(0,r.readType)(e.args[1])],e.annots,"",null,[])),t},EMPTY_MAP:function(n,t,e){return t.insert(n.newElement(["map",(0,r.readType)(e.args[0]),(0,r.readType)(e.args[1])],e.annots,"",null,[])),t},SHA256:function(n,t,e){return t.replace(function(t){return n.newElement(["bytes"],e.annots,e.prim,null,[t])}),t},SHA512:function(n,t,e){return t.replace(function(t){return n.newElement(["bytes"],e.annots,e.prim,null,[t])}),t},BLAKE2B:function(n,t,e){return t.replace(function(t){return n.newElement(["bytes"],e.annots,e.prim,null,[t])}),t},HASH_KEY:function(n,t,e){return t.replace(function(t){return n.newElement(["key_hash"],e.annots,e.prim,null,[t])}),t},ADDRESS:function(n,t,e){return t.replace(function(t){return n.newElement(["address"],e.annots,e.prim,null,[t])}),t},SOURCE:function(n,t,e){return t.insert(n.newElement(["address"],e.annots,"",n.init_args.source,[])),t},SENDER:function(n,t,e){return t.insert(n.newElement(["address"],e.annots,"",n.init_args.sender,[])),t},ISNAT:function(n,t,e){return t.replace(function(t){return n.newElement(["option","bool"],e.annots,e.prim,null,[t])}),t},SET_DELEGATE:function(n,t,e){return t.replace(function(t){return n.newElement(["operation"],e.annots,e.prim,null,[t])}),t},SIZE:function(n,t,e){return t.replace(function(t){return n.newElement(["nat"],e.annots,e.prim,null,[t])}),t},NOT:function(n,t,e){return t.replace(function(t){return n.newElement(["int"],e.annots,e.prim,null,[t])}),t},SLICE:function(t,e,r){var u=e.drop(3),i=(0,n.default)(u,3),a=i[0],o=i[1],l=i[2];return e.insert(t.newElement(["option",l.t],r.annots,r.prim,null,[a,o,l])),e},RENAME:function(n,t,e){return t.top().annots=e.annots,t},CAST:function(n,t,e){return t.top().t=(0,r.readType)(e.args[0]),t}};exports.instrs=o;
},{"@babel/runtime/helpers/slicedToArray":"xkYc","./contract":"cQ6k","./elem":"iRp5","./micheline":"ez1c"}],"cQ6k":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Contract=exports.Stack=void 0;var t=a(require("@babel/runtime/helpers/slicedToArray")),e=a(require("@babel/runtime/helpers/classCallCheck")),n=a(require("@babel/runtime/helpers/createClass")),i=require("./elem"),s=require("./instr"),r=require("./micheline");function a(t){return t&&t.__esModule?t:{default:t}}var u=function(){function i(t){(0,e.default)(this,i),this.stack=t,this.dip_top=0,this.conditions=[]}return(0,n.default)(i,[{key:"length",value:function(){return this.stack.length}},{key:"is_failed",value:function(){if(this.stack.indexOf(void 0)>-1)throw"is_failed / error stack item found: undefined";return!!this.stack.some(function(t){return"fail"===t.t[0]})}},{key:"equal",value:function(t){if(this.stack.length!==t.stack.length)throw"equal / the length of two stacks are not equal";return this.stack.map(function(e,n){return e.id===t.stack[n].id})}},{key:"combine",value:function(t,e,n,i){var s=this,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return this.equal(t).map(function(a,u){var o=s.stack[u];return a?o:e.newElement(o.t,r,n,null,[i,o,t.stack[u]])})}},{key:"pushCondition",value:function(t,e,n){this.conditions.push(n.newElement(["string"],[],e,null,[t]))}},{key:"at",value:function(t){return this.stack[t]}},{key:"top",value:function(){return this.stack[this.dip_top]}},{key:"replace",value:function(t){this.stack[this.dip_top]=t(this.stack[this.dip_top])}},{key:"topn",value:function(t){return this.stack.slice(this.dip_top,this.dip_top+t)}},{key:"drop",value:function(t){return this.stack.splice(this.dip_top,t)}},{key:"dropAt",value:function(e){var n=this.stack.splice(this.dip_top+e,1),i=(0,t.default)(n,1)[0];if(!i)throw"dropAt / error when stack drops element at index:".concat(e);return i}},{key:"empty",value:function(){this.stack=[],this.dip_top=0}},{key:"insert",value:function(t){this.stack.splice(this.dip_top,0,t)}},{key:"insertAt",value:function(t,e){this.stack.splice(this.dip_top+t,0,e)}},{key:"clone",value:function(){var t=new i(this.stack.map(function(t){return t.clone()}));return t.dip_top=this.dip_top,t.conditions=this.conditions.map(function(t){return t.clone()}),t}},{key:"countElements",value:function(){return this.stack.map(function(t){return function t(e){return 1+(e.subs.length?e.subs.reduce(function(e,n){return e+t(n)},0):0)}(t)})}}]),i}();exports.Stack=u;var o=function(){function t(n,i,s,a){var o=this;(0,e.default)(this,t),this.contract={},n.forEach(function(t){var e=t.prim;o.contract[e]=t.args[0]}),this.elem_id={val:1},this.code=this.contract.code;var c=(0,r.createElementByType)(this.contract.parameter,i||(0,r.mockValueFromType)(this.contract.parameter,this.elem_id),this.elem_id),l=(0,r.createElementByType)(this.contract.storage,s||(0,r.mockValueFromType)(this.contract.storage,this.elem_id),this.elem_id);(0,r.settingInstrID)(c,"P"),(0,r.settingInstrID)(l,"S");var h=this.newElement(c.t,[],"Parameter",null,[c]),f=this.newElement(l.t,[],"Storage",null,[l]);this.stack=new u([this.newElement(["pair",(0,r.readType)(this.contract.parameter),(0,r.readType)(this.contract.storage)],[],"",null,[h,f])]),this.fail_stacks=[],this.init_args=a||{self:"SELF",now:"NOW",source:"SOURCE",sender:"SENDER",chain_id:"CHAIN_ID",amount:"AMOUNT",balance:"BALANCE"}}return(0,n.default)(t,[{key:"newElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return new i.Element(this.elem_id.val++,t,e,n,s,r)}},{key:"walkCode",value:function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i instanceof Array){if((e=this.walkCode(i,e)).is_failed())return e}else{if(!(i.prim in s.instrs))throw"walkCode / unhandled instr: ".concat(i.prim);if((e=s.instrs[i.prim](this,e,i)).is_failed())return e}}return e}},{key:"walkToExit",value:function(){return this.fail_stacks=[],this.walkCode(this.code,this.stack.clone())}},{key:"genReplaceMap",value:function(){var t=[],e=function e(n,i){var s=i.slice();if(s.unshift(n),t.push(s),"pair"===n.t[0]){var r=i.slice();r.unshift("PAIR.0");var a=i.slice();a.unshift("PAIR.1"),e(n.subs[0],r),e(n.subs[1],a)}else if("or"===n.t[0])if("Left"===n.instr){var u=i.slice();u.unshift("OR.LEFT"),e(n.subs[0],u)}else if("Right"===n.instr){var o=i.slice();o.unshift("OR.RIGHT"),e(n.subs[0],o)}else{var c=i.slice();c.unshift("OR.LEFT"),e(n.subs[0],c);var l=i.slice();l.unshift("OR.RIGHT"),e(n.subs[1],l)}};e(this.stack.top().subs[0].subs[0],["Parameter"]),e(this.stack.top().subs[1].subs[0],["Storage"]);var n={};return t.forEach(function(t){var e=n;t.forEach(function(n,s){s&&(n instanceof i.Element||(s===t.length-1?e[n]=t[0]:(n in e||(e[n]={}),e=e[n])))})}),n}},{key:"genInstrPattern",value:function(){var t=function t(e,n,i){for(var s in n)!0===n[s]?e[s]=function(t,e){var n=t.subs[0];i.forEach(function(t){return n=n.subs[0]});for(var s=i.length;s--;)n=n.subs[i[s]];return n.annots.length?[n.annots[0]]:e(n)}:(s in e||(e[s]={}),t(e[s],n[s],i.concat({"PAIR.0":0,"PAIR.1":1,"OR.LEFT":0,"OR.RIGHT":1,"ITEM.0":0,"OPTION.0":0}[s])))},e=function e(n,i,s){"pair"===n.t[0]?(e(n.subs[0],{"PAIR.0":i},s),e(n.subs[1],{"PAIR.1":i},s),t(s,{"PAIR.0":i,"PAIR.1":i},[])):"or"===n.t[0]?(e(n.subs[0],{"OR.LEFT":i},s),e(n.subs[1],{"OR.RIGHT":i},s),t(s,{"OR.LEFT":i,"OR.RIGHT":i},[])):"list"===n.t[0]?e(n.subs[0],{"ITEM.0":i},s):"option"===n.t[0]&&n.subs.length?e(n.subs[0],{"OPTION.0":i},s):t(s,i,[])},n={Parameter:function(t,e){return["Parameter"]},Storage:function(t,e){return["Storage"]}};return e(this.stack.top().subs[0].subs[0],{Parameter:!0},n),e(this.stack.top().subs[1].subs[0],{Storage:!0},n),n}}]),t}();exports.Contract=o;
},{"@babel/runtime/helpers/slicedToArray":"xkYc","@babel/runtime/helpers/classCallCheck":"kUj2","@babel/runtime/helpers/createClass":"dMjH","./elem":"iRp5","./instr":"QtXH","./micheline":"ez1c"}],"JN0q":[function(require,module,exports) {
"use strict";function t(t){var e=+new Date;return function(){var r=+new Date;if(r>e+1e3/60)return e=r,t.apply(this,arguments)}}function e(t){var e=location.hash.slice(1).split("&").map(function(t){return t.split("=")}),r={};return e.forEach(function(t){return r[t[0]]=t[1]}),r[t]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.throttle=t,exports.getQuery=e;
},{}],"Bxte":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.genText=l,exports.genGraphNode=b,exports.readT=d,exports.readElem=m;var n=require("../../emu/elem");function t(n,t){return n.map(function(n,e){var r=b(n);return r.children.length?(t.push(r),"#".concat(e)):r.title})}var e={pair:function(n){var e=[],r=t(n.subs,e);return{title:"(".concat(r.join(", "),")"),elem:n,children:e}}},r=function(n){if(n.subs.length)return"None"===n.subs[0].instr},s=function(n){return new Set(["Left","Right"]).has(n.instr)?n.instr.toLowerCase():void 0},c=function(n){return n.subs.length&&"COMPARE"===n.subs[0].instr?u(n):void 0},u=function(n){var t=new Set(["SELF","NOW","SOURCE","SENDER","CHAIN_ID","AMOUNT","BALANCE"]),e=new Set(["ADDRESS","IMPLICIT_ACCOUNT"]),r=function n(t){return e.has(t.instr)?n(t.subs[0]):t},s={numBase:function(n,t,e){var r,s,c=(r=n,s=t,r=parseFloat(r),s=parseFloat(s),isNaN(r)||isNaN(s)?[]:[r,s]);return c.length?e(c[0],c[1]):void 0},EQ:function(n,t){return n===t},NEQ:function(n,t){return n!==t},LE:function(n,t){return s.numBase(n,t,function(n,t){return n<=t})},LT:function(n,t){return s.numBase(n,t,function(n,t){return n<t})},GE:function(n,t){return s.numBase(n,t,function(n,t){return n>=t})},GT:function(n,t){return s.numBase(n,t,function(n,t){return n>t})}},c=l(r(n.subs[0].subs[0])),u=l(r(n.subs[0].subs[1]));if(!t.has(c)&&!t.has(u)){if(n.instr in s){var i=s[n.instr](c,u);return void 0===i?i:i?"left":"right"}throw"invalid comparing method: ".concat(n.instr)}},i={COND_TRUE:function(n){var t=c(n.subs[0]);return{title:"{".concat(l(n.subs[0]),"} is True"),elem:n,direction:t,children:[]}},COND_FALSE:function(n){var t=c(n.subs[0]);return{title:"{".concat(l(n.subs[0]),"} is False"),elem:n,direction:t,children:[]}},COND_LEFT:function(n){var t=s(n.subs[0]);return{title:"{".concat(l(n.subs[0]),"} is Left"),elem:n,direction:t,children:[]}},COND_RIGHT:function(n){var t=s(n.subs[0]);return{title:"{".concat(l(n.subs[0]),"} is Right"),elem:n,direction:t,children:[]}},COND_ITEM:function(n){return{title:"{".concat(l(n.subs[0]),"} has item"),elem:n,children:[]}},COND_EMPTY:function(n){return{title:"{".concat(l(n.subs[0]),"} is empty"),elem:n,children:[]}},COND_NONE:function(n){var t=r(n.subs[0]);return{title:"{".concat(l(n.subs[0]),"} is None"),elem:n,direction:t,children:[]}},COND_SOME:function(n){var t=r(n.subs[0]);return{title:"{".concat(l(n.subs[0]),"} is Some"),elem:n,direction:t,children:[]}},IF_LEFT:function(n){var t=n.subs[0],e=l(t),r=s(t);return{title:r?"{".concat(e,"} is ").concat(t.instr):"if {".concat(e,"} is Left"),elem:n,direction:r,children:n.subs.slice(1).map(function(n){return b(n)})}},IF:function(n){var t=n.subs[0],e=l(t),r=c(t);return{title:r?"".concat(e," is ").concat("left"===r?"True":"False"):"if {".concat(e,"}"),elem:n,direction:r,children:n.subs.slice(1).map(function(n){return b(n)})}},IF_NONE:function(n){var t=n.subs[0],e=l(t),s=r(t);return{title:void 0!==s?"{".concat(e,"} is ").concat(s?"None":"Some"):"if {".concat(e,"} is None"),elem:n,direction:s,children:n.subs.slice(1).map(function(n){return b(n)})}},EXEC:function(n){return{title:"".concat(l(n.subs[1]),"(").concat(l(n.subs[0]),")"),elem:n,children:[]}},NIL:function(n){return{title:"[]",elem:n,children:[]}},CONS:function(n){var t=b(n.subs[0]),e=b(n.subs[1]);return"NIL"===n.subs[1].instr?(t.title="[".concat(t.title,"]"),t):{title:"+",elem:n,children:[t,e]}},ADD:function(n){var e=[],r=t(n.subs,e);return{title:"(".concat(r[0]," + ").concat(r[1],")"),elem:n,children:e}},EDIV:function(n){var e=[],r=t(n.subs,e);return{title:"".concat(r[0]," / ").concat(r[1]),elem:n,children:e}},MUL:function(n){var e=[],r=t(n.subs,e);return{title:"".concat(r[0]," * ").concat(r[1]),elem:n,children:e}}},o={},a={LT:function(n){return"".concat(l(n.subs[0].subs[0])," < ").concat(l(n.subs[0].subs[1]))},GT:function(n){return"".concat(l(n.subs[0].subs[0])," > ").concat(l(n.subs[0].subs[1]))},LE:function(n){return"".concat(l(n.subs[0].subs[0])," <= ").concat(l(n.subs[0].subs[1]))},GE:function(n){return"".concat(l(n.subs[0].subs[0])," >= ").concat(l(n.subs[0].subs[1]))},EQ:function(n){return"".concat(l(n.subs[0].subs[0])," == ").concat(l(n.subs[0].subs[1]))},NEQ:function(n){return"".concat(l(n.subs[0].subs[0])," != ").concat(l(n.subs[0].subs[1]))},MUL:function(n){return"".concat(l(n.subs[0])," * ").concat(l(n.subs[1]))},ADD:function(n){return"(".concat(l(n.subs[0])," + ").concat(l(n.subs[1]),")")},EDIV:function(n){return"".concat(l(n.subs[0])," / ").concat(l(n.subs[1]))}};function l(n){var t=n.t[0].toString();return n.instr in a?a[n.instr](n):t in o?o[t](n):n.subs.length&&!n.annots.length?"".concat(n.instr,"(").concat(n.subs.map(function(n){return l(n)}).join(", "),")"):m(n)}function f(n){var t=n.title;return n.children.forEach(function(n,e){t=t.replace("#".concat(e),f(n))}),t}function b(n){var r=n.t[0].toString();if(n.instr in i)return i[n.instr](n);if(!n.instr&&r in e)return e[r](n);if(n.subs.length){var s=[],c=t(n.subs,s);return{title:"".concat(n.instr,"(").concat(c.join(", "),")"),elem:n,children:s}}return{title:m(n),elem:n,children:[]}}var h=new Set(["option","contract"]);function d(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n instanceof Array?h.has(n[0])||t?n[0].toString()+(1===n.length?"":"<".concat(n.slice(1).map(function(n){return d(n,!0)}).join(", "),">")):n[0].toString():n}function m(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof n.value&&n.value.length?n.value:n.annots.length?n.annots[0]+":"+d(n.t,t):n.instr||d(n.t,t)}
},{"../../emu/elem":"iRp5"}],"YFuV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TextBlock=exports.Text=exports.AutoCurve=exports.Curve=exports.Arrow=exports.Rect=exports.Component=void 0;var t=n(require("@babel/runtime/helpers/classCallCheck")),e=n(require("@babel/runtime/helpers/createClass"));function n(t){return t&&t.__esModule?t:{default:t}}var r=function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.style.width="0",t.style.height="0",t.style.border="0",t.style.padding="0",document.body&&document.body.appendChild(t),function(e){return t.appendChild(e),e.getBBox()}}(),o=function(t){var e=r(t),n=e.x+e.width/2,o=e.y+e.height/2;return[[n,e.y],[e.x+e.width,o],[n,e.y+e.height],[e.x,o]]};function i(t){var e=t.split(/[\s,]+/);if(2!==e.length)throw"invalid svg point: ".concat(t);var n=e.map(function(e){var n=parseInt(e);if(isNaN(n))throw"invalid svg point: ".concat(t);return n});return[n[0],n[1]]}function a(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function s(t){return"".concat(t[0]," ").concat(t[1])}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r={up:[0,-n],down:[0,n],left:[-n,0],right:[n,0]}[e];return[t[0]+r[0],t[1]+r[1]]}function c(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2);return n?Math.sqrt(r):r}function l(t,e,n){var r=Number.MAX_SAFE_INTEGER,o=[];return t.forEach(function(t,i){e.forEach(function(e,a){if(n&&(!n.has(i)||!n.has(a)))return!1;var s=c(t,e,!1);s<r&&(r=s,o=[i,a])})}),{last_d:r,index1:o[0],index2:o[1]}}var h=function(){function n(e){var r=this;(0,t.default)(this,n),e instanceof Array?(this.kind="g",this.el=document.createElementNS("http://www.w3.org/2000/svg","g"),e.forEach(function(t){return r.el.appendChild(t.el)})):(this.kind=e,this.el=document.createElementNS("http://www.w3.org/2000/svg",e))}return(0,e.default)(n,[{key:"setAttrs",value:function(t){for(var e in t)this.el.setAttribute(e,t[e])}},{key:"setStyles",value:function(t){for(var e in t)this.el.style[e]=t[e]}},{key:"getAttr",value:function(t){return this.el.getAttribute(t)}},{key:"relocate",value:function(t){var e=this.key_points[3][0],n=this.key_points[0][1];this.setAttrs({transform:"translate(".concat(t[0]-e,", ").concat(t[1]-n,")")}),this.key_points.forEach(function(r){r[0]+=t[0]-e,r[1]+=t[1]-n})}},{key:"append",value:function(t){this.el.appendChild(t)}},{key:"on",value:function(t,e){this.el.getAttribute("class")||this.el.setAttribute("class","with-event"),this.el.addEventListener(t,e)}},{key:"off",value:function(t,e){this.el.removeEventListener(t,e)}},{key:"show",value:function(){this.el.removeAttribute("display")}},{key:"hide",value:function(){this.el.setAttribute("display","none")}},{key:"toggle",value:function(){this.el.getAttribute("display")?this.show():this.hide()}}]),n}();exports.Component=h;var p=function(t,e,n){var r=new h("rect");r.setAttrs({x:t[0],y:t[1],width:e,height:n,stroke:"black",fill:"transparent",rx:"5"});var o=t[0]+e/2,i=t[1]+n/2;return r.key_points=[[o,t[1]],[t[0]+e,i],[o,t[1]+n],[t[0],i]],r};exports.Rect=p;var v=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.6,o=new h("path"),i=n*r,a={up:function(){return[[t[0]-i,t[1]-n],[t[0]+i,t[1]-n]]},down:function(){return[[t[0]-i,t[1]+n],[t[0]+i,t[1]+n]]},left:function(){return[[t[0]-n,t[1]+i],[t[0]-n,t[1]-i]]},right:function(){return[[t[0]+n,t[1]-i],[t[0]+n,t[1]+i]]}}[e](),u={up:function(){return[t[0],t[1]-i]},down:function(){return[t[0],t[1]+i]},left:function(){return[t[0]-i,t[1]]},right:function(){return[t[0]+i,t[1]]}}[e]();return o.setAttrs({d:"\n      M ".concat(s(t),"\n      L ").concat(s(a[0]),"\n      L ").concat(s(u),"\n      L ").concat(s(a[1]),"\n      Z\n    ")}),o};exports.Arrow=v;var f=function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=new h("path"),c=[s(t),s(e)],l=c[0],p=c[1],v=[s(u(t,n,o)),s(u(e,r,o))],f=v[0],d=v[1];return a.setAttrs(Object.assign({d:"\n      M ".concat(l,"\n      C ").concat(f,", ").concat(d,", ").concat(p,"\n    "),stroke:"#aaa",fill:"transparent"},i)),a};exports.Curve=f;var d=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=l(t.key_points,e.key_points,new Set([0,2])),s=["up","right","down","left"],u=t.key_points[i.index1],c=e.key_points[i.index2],p=s[i.index1],d=s[i.index2],g=f(u,c,p,d,16,o),w=175*Math.atan((c[1]-u[1])/(c[0]-u[0]))/Math.PI;if(r){var x=a(u,c),k=y(c[0]<u[0]?[x[0]-3,x[1]]:[x[0]+3,x[1]],r,.6);k.setAttrs({"text-anchor":"middle",transform:"rotate(".concat(w,", ").concat(k.getAttr("x"),", ").concat(k.getAttr("y"),")")}),g=new h([g,k])}if(n){var m=v(c,d);return new h([g,m])}return g};exports.AutoCurve=d;var y=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=new h("text");return r.setAttrs({x:t[0],y:t[1]}),r.setStyles({fontSize:n+"rem"}),r.append(document.createTextNode(e)),r.key_points=o(r.el),r};exports.Text=y;var g=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.map(function(e,r){return y([t[0],t[1]+r*n*10],e,n)}),a=new h(i);if(a.key_points=o(a.el),r){var s=i[0].key_points[0][1],u=t[0],c=Math.max.apply(null,i.map(function(t){return t.key_points[1][0]-t.key_points[3][0]})),l=i[i.length-1].key_points[2][1]-i[0].key_points[0][1],v=p([u-10,s-10],c+20,l+20),f=new h([a,v]);return f.key_points=v.key_points,f}return a};exports.TextBlock=g;
},{"@babel/runtime/helpers/classCallCheck":"kUj2","@babel/runtime/helpers/createClass":"dMjH"}],"z2KU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGRenderer=void 0;var e=s(require("@babel/runtime/helpers/classCallCheck")),t=s(require("@babel/runtime/helpers/createClass")),n=s(require("@babel/runtime/helpers/slicedToArray")),r=require("../../utils"),i=require("../../emu/elem"),o=require("../../emu/contract"),a=require("./repr"),c=require("./components");function s(e){return e&&e.__esModule?e:{default:e}}function u(e,t,i){var o=e.getAttribute("viewBox").split(" ").map(function(e){return parseInt(e)}),a=(0,n.default)(o,4),c=a[0],s=a[1],u=a[2],l=a[3],f=!1,p=[0,0];e.addEventListener("mousedown",function(e){p=[e.clientX,e.clientY],f=!0}),e.addEventListener("mousemove",(0,r.throttle)(function(t){if(!f)return!1;e.setAttribute("viewBox","".concat(c+p[0]-t.clientX," ").concat(s+p[1]-t.clientY," ").concat(u," ").concat(l))}));var d=function(e){f&&(c+=p[0]-e.clientX,s+=p[1]-e.clientY),f=!1};e.addEventListener("mouseup",d),e.addEventListener("mouseleave",d),t.addEventListener("click",function(t){t.preventDefault();u<=100||l<=100||(u+=-100,l+=-100,c-=-50,s-=-50,e.setAttribute("viewBox","".concat(c," ").concat(s," ").concat(u," ").concat(l)))}),i.addEventListener("click",function(t){t.preventDefault();u+=100,l+=100,c-=50,s-=50,e.setAttribute("viewBox","".concat(c," ").concat(s," ").concat(u," ").concat(l))})}var l=function(){function n(){(0,e.default)(this,n),this.selected={graph_node:null,svg_elem:null}}return(0,t.default)(n,[{key:"createSVG",value:function(e,t){var n=document.createElement("div");n.className="svg-wrapper";var r=document.createElement("div");r.innerHTML="+";var i=document.createElement("div");i.innerHTML="-",[r,i].forEach(function(e){e.style.display="inline-flex",e.style.margin="4px 0 0 4px",e.style.width="16px",e.style.height="16px",e.style.justifyContent="center",e.style.alignItems="center",e.style.cursor="pointer",e.style.fontFamily="monospace",e.style.border="1px solid black"});var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.style.width="100%",o.style.height=e[1];var a=[-e[0]/2,40,e[0],e[1]];return o.setAttribute("viewBox",a.join(" ")),u(o,r,i),o.appendChild(t),n.appendChild(r),n.appendChild(i),n.appendChild(o),n}},{key:"renderDiff",value:function(e){var t=[-1,-1],n={left:"red",right:"green",both:"#8B7400"},r={},o={};!function e(t,s){var u=t.value instanceof i.DiffValue&&t.value.hasValue()?t.value.read(a.readElem):(0,a.readElem)(t),l=(0,c.Text)([0,0],u,1.2);return t.value instanceof i.DiffValue&&l.setStyles({fill:n[t.value.direction]}),s in r||(r[s]=[],o[s]=[]),r[s].push(l),t.subs.forEach(function(t){o[s].push({from:l,direction:t.value instanceof i.DiffValue?t.value.direction:"",to:e(t,s+1)})}),l}(e,1);var s=[],u=function(e){var n=r[e],i=[],a=[],c=0;n.forEach(function(e,t){var n=e.key_points[1][0]-e.key_points[3][0];i.push(c),a.push(c+n/2),c+=n+20}),c>t[0]&&(t[0]=c),50*parseInt(e)>t[1]&&(t[1]=50*parseInt(e));var u=0;"1"===e?u=0:(o[parseInt(e)-1].forEach(function(e,t){var n=e.from.key_points[0][0];u+=a[t]-n}),u/=n.length),n.forEach(function(t,n){t.relocate([i[n]-u,50*parseInt(e)]),s.push(t)})};for(var l in r)u(l);for(var f in o)o[f].forEach(function(e){var t=(0,c.AutoCurve)(e.from,e.to,!0,"",e.direction?{stroke:n[e.direction]}:{});s.push(t)});return this.createSVG([screen.width,t[1]],new c.Component(s).el)}},{key:"renderData",value:function(e){var t=[-1,-1],n={},r={};!function e(t,i){var o=(0,a.readElem)(t),s=(0,c.Text)([0,0],o,1.2);return i in n||(n[i]=[],r[i]=[]),n[i].push(s),t.subs.forEach(function(t){r[i].push({from:s,to:e(t,i+1)})}),s}(e,1);var i=[],o=function(e){var o=n[e],a=[],c=[],s=0;o.forEach(function(e,t){var n=e.key_points[1][0]-e.key_points[3][0];a.push(s),c.push(s+n/2),s+=n+20}),s>t[0]&&(t[0]=s),50*parseInt(e)>t[1]&&(t[1]=50*parseInt(e));var u=0;"1"===e?u=0:(r[parseInt(e)-1].forEach(function(e,t){var n=e.from.key_points[0][0];u+=c[t]-n}),u/=o.length),o.forEach(function(t,n){t.relocate([a[n]-u,50*parseInt(e)]),i.push(t)})};for(var s in n)o(s);for(var u in r)r[u].forEach(function(e){i.push((0,c.AutoCurve)(e.from,e.to,!0))});return this.createSVG([screen.width,t[1]],new c.Component(i).el)}},{key:"render",value:function(e){var t=(0,a.readT)(e.stack[0].t,!0);return this.renderGraphNode((0,a.genGraphNode)(e.stack[0]),t)}},{key:"renderTree",value:function(e,t){var n={title:"",elem:new i.Element(0,[]),children:[]};return function e(n,r){for(var i in n)if("reason"===i){var o=(0,a.genGraphNode)(n[i]);o.title="RESULT -> "+o.title,o.style={fill:"red"},r.children.push(o)}else{var c=(0,a.genGraphNode)(t[i]);r.children.push(c),e(n[i],c)}}(e,n),this.renderGraphNode(n)}},{key:"renderGraphNode",value:function(e,t){var n=this,r=[-1,-1],i={},o={};!function e(r,s){var u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],l=r.title.length>40?r.title.slice(0,40)+"...":r.title,f=(0,c.Text)([0,0],l,1.2);return r.title.length>40&&(f.setStyles({cursor:"pointer",textDecoration:"underline"}),f.on("click",function(){n.selected.graph_node=r,n.selected.svg_elem=f})),t&&(0,a.readT)(r.elem.t,!0)===t&&f.setStyles({fill:"red"}),s in i||(i[s]=[],o[s]=[]),f.setStyles({opacity:u?"1":"0.1"}),r.style&&f.setStyles(r.style),i[s].push(f),r.children.forEach(function(t,n){var i=r.direction?u&&("left"===r.direction&&0===n||"right"===r.direction&&1===n):u;o[s].push({from:f,in_flow:i,to:e(t,s+1,i)})}),f}(e,1);var s=[],u=function(e){var t=i[e],n=[],a=[],c=0;t.forEach(function(e,t){var r=e.key_points[1][0]-e.key_points[3][0];n.push(c),a.push(c+r/2),c+=r+20}),c>r[0]&&(r[0]=c),50*parseInt(e)>r[1]&&(r[1]=50*parseInt(e));var u=0;"1"===e?u=0:(o[parseInt(e)-1].forEach(function(e,t){var n=e.from.key_points[0][0];u+=a[t]-n}),u/=t.length),t.forEach(function(t,r){t.relocate([n[r]-u,100*parseInt(e)]),s.push(t)})};for(var l in i)u(l);for(var f in o)o[f].forEach(function(e){var t=(0,c.AutoCurve)(e.from,e.to,!0);t.setStyles({opacity:e.in_flow?"1":"0.1"}),s.push(t)});return this.createSVG([screen.width,2*r[1]],new c.Component(s).el)}}]),n}();exports.SVGRenderer=l;
},{"@babel/runtime/helpers/classCallCheck":"kUj2","@babel/runtime/helpers/createClass":"dMjH","@babel/runtime/helpers/slicedToArray":"xkYc","../../utils":"JN0q","../../emu/elem":"iRp5","../../emu/contract":"cQ6k","./repr":"Bxte","./components":"YFuV"}],"p5uu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.replaceElement=u,exports.reduceElement=r,exports.renderElement=e,exports.instr_reprs=exports.t_reprs=void 0;var n=require("../emu/elem");function s(n,s){for(var t=n,u=s[t.instr],r=null;t&&u;)u instanceof Function&&(r=u),u=u[(t=t.subs[0]).instr];return r}function t(s,t){for(var u=s,r=t[u.instr];u&&r;){if(r instanceof n.Element)return r;r=r[(u=u.subs[0]).instr]}return null}function u(n,s){if(n.subs.length){var r=t(n,s);return r||(n.subs=n.subs.map(function(n){return u(n,s)}),n)}return n}function r(n){var s={"PAIR.0":function(n){return n.t=n.t[1]instanceof Array?n.t[1]:[n.t[1]],n.annots.length&&(n.annots[0]+=".left"),n},"PAIR.1":function(n){return n.t=n.t[2]instanceof Array?n.t[2]:[n.t[2]],n.annots.length&&(n.annots[0]+=".right"),n},"OPTION.0":function(n){return n.t=n.t[1]instanceof Array?n.t[1]:[n.t[1]],n}};if(n.subs.length){if(n.instr in s){var t=r(n.subs[0].clone());return s[n.instr](t)}return n.subs=n.subs.map(function(n){return r(n)}),n}return n}function e(n,t){if(n.instr&&n.subs.length){for(var u=0;u<t.length;u++){var r=s(n,t[u]);if(r)return r(n,function(n){return e(n,t)})}return[n.instr].concat(n.subs.map(function(n){return e(n,t)}))}var o=n.t[0].toString();if(i[o])return i[o](n,function(n){return e(n,t)});if(n.annots.length)return[n.annots[0]+":"+n.t[0].toString()];if(null!==n.value)return[n.value];throw"renderElement / unhandled type: ".concat(o)}var i={fail:function(n,s){var t=n.subs.slice(1);return["fail",s(n.subs[0]),t.map(function(n){return s(n)})]},pair:function(n,s){return["pair",[s(n.subs[0]),s(n.subs[1])]]},list:function(n,s){return["list",n.subs.map(function(n){return s(n)})]},set:function(n,s){return["set",n.subs.map(function(n){return s(n)})]},string:function(n,s){return['"'.concat(n.value,'"')]},map:function(n,s){return["map",n.subs.map(function(n){return[s(n.subs[0]),s(n.subs[1])]})]},big_map:function(n,s){return["big_map",n.subs.map(function(n){return[s(n.subs[0]),s(n.subs[1])]})]},option:function(n,s){return["option",n.t[1]]}};exports.t_reprs=i;var o={COND_TRUE:function(n,s){return s(n.subs[0])},COND_FALSE:function(n,s){return["!",s(n.subs[0])]},COND_LEFT:function(n,s){return[s(n.subs[0]),"is Left"]},COND_RIGHT:function(n,s){return[s(n.subs[0]),"is Right"]},COND_ITEM:function(n,s){return[s(n.subs[0]),"has item"]},COND_EMPTY:function(n,s){return[s(n.subs[0]),"is empty"]},COND_NONE:function(n,s){return[s(n.subs[0]),"is None"]},COND_SOME:function(n,s){return[s(n.subs[0]),"is Some"]},GT:function(n,s){return[s(n.subs[0].subs[0]),">",s(n.subs[0].subs[1])]},LT:function(n,s){return[s(n.subs[0].subs[0]),"<",s(n.subs[0].subs[1])]},GE:function(n,s){return[s(n.subs[0].subs[0]),">=",s(n.subs[0].subs[1])]},LE:function(n,s){return[s(n.subs[0].subs[0]),"<=",s(n.subs[0].subs[1])]},EQ:function(n,s){return[s(n.subs[0].subs[0]),"==","0"]},NEQ:function(n,s){return[s(n.subs[0].subs[0]),"!=","0"]},IF:function(n,s){return["if",s(n.subs[0]),s(n.subs[1]),s(n.subs[2])]},IF_NONE:function(n,s){return["if",s(n.subs[0]),"is None",s(n.subs[1]),s(n.subs[2])]},IF_LEFT:function(n,s){return["if",s(n.subs[0]),"is Left",s(n.subs[1]),s(n.subs[2])]},ADD:function(n,s){return[s(n.subs[0]),"+",s(n.subs[1])]},SUB:function(n,s){return[s(n.subs[0]),"-",s(n.subs[1])]},CONS:function(n,s){return"NIL"===n.subs[1].instr?["list",s(n.subs[0])]:["list",s(n.subs[0]).concat(s(n.subs[1]))]},NIL:function(){return[]},"OPTION.0":{GET:function(n,s){var t=n.subs[0];return[s(t.subs[1]),"get",s(t.subs[0])]}},UPDATE:function(n,s){return[s(n.subs[2]),".",s(n.subs[0]),"=",s(n.subs[1])]}};exports.instr_reprs=o;
},{"../emu/elem":"iRp5"}],"GOVZ":[function(require,module,exports) {
"use strict";var e=require("../emu/elem"),r=require("../emu/contract"),a=require("../renderer/svg"),t=require("../renderer/repr"),n=require("../emu/micheline"),c={diff:function(r,t,c){var s=(0,n.createElementByType)(r,(0,n.mockValueFromType)(r)),i=(0,n.createElementByType)(r,t),u=(0,n.createElementByType)(r,c);(0,e.diffElement)(s,i,u);var d=new a.SVGRenderer;return{renderer:d,graph:d.renderDiff(s)}},contract:function(e,n,c,s){var i=new r.Contract(e,n,c,s),u=i.walkToExit(),d=i.genReplaceMap();u.stack[0]=(0,t.replaceElement)(u.stack[0],d),u.stack[0]=(0,t.reduceElement)(u.stack[0]);var l=new a.SVGRenderer,k={},m={};return i.fail_stacks.forEach(function(e){e.stack[0]=(0,t.replaceElement)(e.stack[0],d),e.stack[0]=(0,t.reduceElement)(e.stack[0]);var r=k,a=e.stack[0].subs;a.forEach(function(e,t){t&&(m[e.id]=e,e.id in r||(r[e.id]={}),t===a.length-1?r[e.id].reason=a[0]:r=r[e.id])})}),{renderer:l,contract:i,graphs:{failure:l.renderTree(k,m),parameter:l.renderData(i.stack.stack[0].subs[0]),storage:l.renderData(i.stack.stack[0].subs[1]),success:l.render(u)}}}};window.Misualizer=c;
},{"../emu/elem":"iRp5","../emu/contract":"cQ6k","../renderer/svg":"z2KU","../renderer/repr":"p5uu","../emu/micheline":"ez1c"}]},{},["GOVZ"], null)